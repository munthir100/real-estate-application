(()=>{function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var a,n,o;return a=t,(n=[{key:"init",value:function(){var e=$("#table-backups");e.on("click",".deleteDialog",(function(e){e.preventDefault(),$(".delete-crud-entry").data("section",$(e.currentTarget).data("section")),$(".modal-confirm-delete").modal("show")})),e.on("click",".restoreBackup",(function(e){e.preventDefault(),$("#restore-backup-button").data("section",$(e.currentTarget).data("section")),$("#restore-backup-modal").modal("show")})),$(".delete-crud-entry").on("click",(function(t){t.preventDefault(),$(".modal-confirm-delete").modal("hide");var a=$(t.currentTarget).data("section");$httpClient.make().delete(a).then((function(t){var n=t.data;e.find("tbody tr").length<=1&&e.load(window.location.href+" #table-backups > *"),e.find('a[data-section="'+a+'"]').closest("tr").remove(),Botble.showSuccess(n.message)}))})),$("#restore-backup-button").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("button-loading"),$httpClient.make().get(t.data("section")).then((function(e){var a=e.data;t.closest(".modal").modal("hide"),Botble.showSuccess(a.message),window.location.reload()})).finally((function(){t.removeClass("button-loading")}))})),$(document).on("click","#generate_backup",(function(e){e.preventDefault(),$("#name").val(""),$("#description").val(""),$("#create-backup-modal").modal("show")})),$("#create-backup-modal").on("click","#create-backup-button",(function(t){t.preventDefault();var a=$(t.currentTarget);a.addClass("button-loading");var n=$("#name").val(),o=$("#description").val(),r=!1;""!==n&&null!==n||(r=!0,Botble.showError("Backup name is required!")),r?a.removeClass("button-loading"):$httpClient.make().post($("div[data-route-create]").data("route-create"),{name:n,description:o}).then((function(t){var a=t.data;e.find(".no-backup-row").remove(),e.find("tbody").append(a.data),Botble.showSuccess(a.message)})).finally((function(){a.removeClass("button-loading"),a.closest(".modal").modal("hide")}))}))}}])&&e(a.prototype,n),o&&e(a,o),t}();$(document).ready((function(){(new t).init()}))})();