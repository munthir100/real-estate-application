digraph UML_Diagram {
    node [shape = record;];
    Status [label = "{Status | id: int | name: string}";];
    
    // Town
    Town [label = "{Town | id: int | name: string}";];
    
    // City
    City [label = "{City | id: int | name: string | town_id (PK) : int}";];
    
    // Currency
    Currency [label = "{Currency | id: int | name: string | code: string}";];
    
    // Subscription Plan
    Plan [label = "{Plan | id: int | name: string | price: float | duration: int | num_ads_allowed: int | num_temp_ads: int | num_featured_ads: int | priority_support: int | num_affiliate_users: int | include_ologo: bool}";];
    
    // Location
    Location [label = "{Location | id: int | name: string | longitude: float | latitude: float}";];
    
    // User Types
    UserType [label = "{UserType | id: int | name: string}";];
    
    // Broker - Seeker
    User [label = "{User | id: int | username: string |first_name: string |middle_name: string|last_name:string|description:string| gender: string | birth_date:date | email: string | password: string |user_verified_at:date| user_type_id (FK): int}";];
    // gender is enum male or female
    Broker [label = "{Broker | id: int | user_id (FK): int | commertial_number:int | office_name : string | tax_number : int|company_name:string }";];
    Seeker [label = "{Seeker | id: int | user_id (FK): int}";];
    Agent [label = "{Agent | id: int | user_id (FK): int | broker_id (FK) : int | ceo:string}";];
    Admin [label = "{Admin | id: int | user_type_id (FK): int}";];
    Agent [label = "{Agent | id: int | user_type_id (FK): int | broker_id:int (FK)}";];
    UserOtp [label = "{UserOtp | id: int | user_id (FK): int | code:string}";];
    
    // Property Advertisement
    PropertyType [label = "{PropertyType | id: int | name: string}";];
    PropertyLegalData [label = "{PropertyLegalData | id: int |property_id (FK)| license_number: string|date_of_license:date|license_expiration_date:date|postal_code:string|building_number:string|additional_number:string|has_restriction:string|has_mortgage:string|obligations_on_property:string}";];
    
    // User Plan
    UserPlan [label = "{UserPlan | id: int | user_id (FK): int | plan_id (FK): int}";];
    
    // Purchase - rent - investment
    Property [label = "{Property | id: int | user_id (FK): int | property_type_id (FK): int | status_id (FK): int | city_id (FK): int | title: string | description: string| square: int | period: enum(day,month,year) | number_of_bedrooms: int | number_of_beds: int | location_id (FK): int | currency_id (FK): int |auto_renew:bool| number_of_floors: int | price: int | video_url: string | seo_title: string | seo_description: string | seo_link: string|label:string|category_id (FK):int}";];
    
    TemporaryAd [label = "{TemporaryAd | id: int | property_id (FK): int | start_date: datetime | end_date: datetime}";];
    FeaturedAd [label = "{FeaturedAd | id: int | property_id (FK): int}";];
    
    // Real Estate Applications
    Application [label = "{Application | id: int | property_id (FK): int}";];
    
    // Facility
    Facility [label = "{Facility | id: int | distance:float}";];
    
    // Facility
    Feature [label = "{Facility | id: int | name:string}";];
    
    
    // Facility
    Category [label = "{Category | id: int | name:string}";];
    
    // PropertyFacility
    PropertyFacility [label = "{PropertyFacility | id: int | property_id (FK): int | facility_id (FK): int}";];
    
    // PropertyFeature
    PropertyFeature [label = "{PropertyFeature | id: int | property_id (FK): int | feature_id (FK): int}";];
    
    // Notification
    Notification [label = "{Notification | id: int | user_id (FK): int | message: string | status_id (FK): int}";];
    
    // User Relationships
    User -> UserType [label = "has a";];
    User -> Plan [label = "subscribes to";];
    broker -> User [label = "user_id";];
    Seeker -> User [label = "user_id";];
    Admin -> User [label = "user_type_id";];
    
    // Property Relationships
    Property -> PropertyType [label = "is of";];
    Property -> Status [label = "has status";];
    Property -> TemporaryAd [label = "temp_advertises";];
    Property -> FeaturedAd [label = "featured_advertises";];
    Property -> PropertyFacility [label = "has facilities";];
    Property -> PropertyLegalData [label = "has a";];
    
    // Real Estate Applications Relationships 
    Application -> Property [label = "applies to";];
    Property -> Location [label = "is located at";];
    Property -> Currency [label = "uses currency";];
    
    // City Relationships
    City -> Town [label = "is in";];
    Property -> City [label = "is located in";];
    
    // Notification Relationships
    Notification -> User [label = "sent to";];
}